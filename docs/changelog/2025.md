# Changelog 2025

<!-- If one clicks on "Changelog" on the navbar one ends up at /changelog instead of /changelog/2024; for this reason the links to older changes below have to be https:// prefixed; otherwise they seem broken -->

```{note}

<svg aria-hidden="true" focusable="false" role="img" class="octicon octicon-eye" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display: inline-block; user-select: none; vertical-align: text-bottom; overflow: visible;"><path d="M8 2c1.981 0 3.671.992 4.933 2.078 1.27 1.091 2.187 2.345 2.637 3.023a1.62 1.62 0 0 1 0 1.798c-.45.678-1.367 1.932-2.637 3.023C11.67 13.008 9.981 14 8 14c-1.981 0-3.671-.992-4.933-2.078C1.797 10.83.88 9.576.43 8.898a1.62 1.62 0 0 1 0-1.798c.45-.677 1.367-1.931 2.637-3.022C4.33 2.992 6.019 2 8 2ZM1.679 7.932a.12.12 0 0 0 0 .136c.411.622 1.241 1.75 2.366 2.717C5.176 11.758 6.527 12.5 8 12.5c1.473 0 2.825-.742 3.955-1.715 1.124-.967 1.954-2.096 2.366-2.717a.12.12 0 0 0 0-.136c-.412-.621-1.242-1.75-2.366-2.717C10.824 4.242 9.473 3.5 8 3.5c-1.473 0-2.825.742-3.955 1.715-1.124.967-1.954 2.096-2.366 2.717ZM8 10a2 2 0 1 1-.001-3.999A2 2 0 0 1 8 10Z"></path></svg> Get notified by watching releases for git repositories: [lamindb](https://github.com/laminlabs/lamindb), [laminhub](https://github.com/laminlabs/laminhub-public), [laminr](https://github.com/laminlabs/laminr), and [bionty](https://github.com/laminlabs/bionty).

ü™ú For other years, see: [2024](https://docs.lamin.ai/changelog/2024) ¬∑ [2023](https://docs.lamin.ai/changelog/2023) ¬∑ [2022](https://docs.lamin.ai/changelog/2022)

```

```{eval-rst}
.. role:: small
```

## 2025-04-15 {small}`db 1.4.0 | bionty 1.3.0`

‚ú® Add `schema` as an argument to `Artifact.from_X()`. [PR](https://github.com/laminlabs/lamindb/pull/2672) [@falexwolf](https://github.com/falexwolf)

```python
artifact = ln.Artifact.from_df(df, key="my_dataset.parquet", schema=schema).save()
```

‚ú® Enable to define simple schemas that merely enforce a feature identifier type. [PR](https://github.com/laminlabs/lamindb/pull/2668) [@falexwolf](https://github.com/falexwolf)

```python
schema = ln.Schema(itype=ln.Feature).save()  # <-- enforce valid feature identifiers, no need to define specific required features
```

‚ú® Enable to define optional features on a per-schema level & improve schema hash calculation. [PR](https://github.com/laminlabs/lamindb/pull/2635) [@sunnyosun](https://github.com/sunnyosun)

```python
schema = ln.Schema(
  features=[
    ln.Feature(name="sample_id", dtype=str).save()  # required
    ln.Feature(name="sample_name", dtype=str).with_config(optional=True)  # optional
  ],
).save()
```

‚ú® Introduce `lamin run` with a Modal backend. [PR](https://github.com/laminlabs/lamindb/pull/2643) [@ragyhaddad](https://github.com/ragyhaddad)

```bash
lamin run my_script.py --project my_project  # <-- will run the script on Modal
```

‚ú® Support auto-download of Ensembl genes of all organisms. [Guide](/bio-registries.ipynb#access-any-ensembl-genes) [PR](https://github.com/laminlabs/bionty/pull/236) [@sunnyosun](https://github.com/sunnyosun)

```python
gene_ontology = bt.base.Gene(source="ensembl", organism="rabbit", version='release-103')
gene_ontology.register_source_in_lamindb()  # register the new ontology source in lamindb
source = bt.Source.get(entity="bionty.Gene", name="ensembl", organism="rabbit", version='release-103')
bt.Gene.import_source(source=source)  # import all genes from that source
```

üö∏ Enable to query by features & params through `Artifact.filter()` and `Run.filter()`. [Guide](/registries.ipynb#query-datasets-by-features) [PR](https://github.com/laminlabs/lamindb/pull/2671) [@falexwolf](https://github.com/falexwolf)

```python
ln.Artifact.filter(scientist="Barbara McClintock")
```

User experience.

- üö∏ `from_source` no longer returns `None` but throws a `NoResultFound` exception if the look up in the public ontology fails [PR](https://github.com/laminlabs/lamindb/pull/2628) [@sunnyosun](https://github.com/sunnyosun)
- üö∏ Allow renaming artifacts & transforms within the same version family [PR](https://github.com/laminlabs/lamindb/pull/2614) [@falexwolf](https://github.com/falexwolf)
- üö∏ Better support `minimal_set`, `maximal_set`, `ordered_set` in curators [PR](https://github.com/laminlabs/lamindb/pull/2632) [@sunnyosun](https://github.com/sunnyosun)
- üö∏ Enable to pass the stem uid to `lamin save` [PR](https://github.com/laminlabs/lamin-cli/pull/125) [@falexwolf](https://github.com/falexwolf)
- üö∏ No longer throw an error but merely print a warning when attempting to update a schema [PR](https://github.com/laminlabs/lamindb/pull/2673) [@falexwolf](https://github.com/falexwolf)
- üö∏ Enable plain notebook uploads by making a default run for notebook in case no run is found [PR](https://github.com/laminlabs/lamin-cli/pull/127) [@falexwolf](https://github.com/falexwolf)
- üö∏ Enable to authenticate and set the current instance through environment variables [PR](https://github.com/laminlabs/lamindb-setup/pull/1016) [@falexwolf](https://github.com/falexwolf)
- üö∏ Show link to hub in `view_lineage()` and render lineage through graphviz also in scripts [PR](https://github.com/laminlabs/lamindb/pull/2622) [@falexwolf](https://github.com/falexwolf)
- üö∏ Order `IsVersioned.versions` query set [PR](https://github.com/laminlabs/lamindb/pull/2608) [@falexwolf](https://github.com/falexwolf)
- üö∏ Do not print warning about missing schema modules [PR](https://github.com/laminlabs/lamindb-setup/pull/1010) [@falexwolf](https://github.com/falexwolf)

Refactors.

- ‚ôªÔ∏è Eliminate duplicated parsing & record creation during curation [PR](https://github.com/laminlabs/lamindb/pull/2650) [@falexwolf](https://github.com/falexwolf)
- ‚ôªÔ∏è Remove `verbosity` and `organism` arguments on `CatManager` level [PR](https://github.com/laminlabs/lamindb/pull/2666) [PR](https://github.com/laminlabs/lamindb/pull/2665) [@falexwolf](https://github.com/falexwolf)
- ‚ôªÔ∏è Organize categorical curation code with `CatColumn` [PR](https://github.com/laminlabs/lamindb/pull/2644) [@sunnyosun](https://github.com/sunnyosun)
- ‚ôªÔ∏è Add `return_graph` argument to `view_lineage()` [PR](https://github.com/laminlabs/lamindb/pull/2626) [@lazappi](https://github.com/lazappi)
- ‚ôªÔ∏è Suppress `aiobotocore` traceback logging [PR](https://github.com/laminlabs/lamindb-setup/pull/1017) [@Koncopd](https://github.com/Koncopd)
- ‚¨ÜÔ∏è Upgrade `supabase` to `<2.15.0` [PR](https://github.com/laminlabs/lamindb-setup/pull/1021) [@Koncopd](https://github.com/Koncopd)
- ‚¨ÜÔ∏è Upgrade `anndata` to `0.11.4` [PR](https://github.com/laminlabs/lamindb/pull/2613) [@Koncopd](https://github.com/Koncopd)

Docs.

- üìù Compare lamindb with pydantic and pandera in an FAQ doc [PR](https://github.com/laminlabs/lamindb/pull/2664) [@falexwolf](https://github.com/falexwolf)
- üìù Document access any Ensembl genes [PR](https://github.com/laminlabs/lamindb/pull/2677) [@sunnyosun](https://github.com/sunnyosun)

Bugs.

- üêõ Fix validation of `var_index` [PR](https://github.com/laminlabs/lamindb/pull/2648) [@sunnyosun](https://github.com/sunnyosun)
- üêõ Fix `numcodecs==0.16.0` incompatibility with `zarr v2` [PR](https://github.com/laminlabs/lamindb/pull/2645) [@Koncopd](https://github.com/Koncopd)
- üêõ Fix `SpatialData` and `MuData` check [PR](https://github.com/laminlabs/lamindb/pull/2627) [@Zethson](https://github.com/Zethson)
- üêõ Fix organism passing to `from_source` [PR](https://github.com/laminlabs/lamindb/pull/2621) [@sunnyosun](https://github.com/sunnyosun)
- üêõ Return an empty set not a dict for modules in instance settings [PR](https://github.com/laminlabs/lamindb-setup/pull/1011) [@falexwolf](https://github.com/falexwolf)

Bionty.

- üö∏ Make the default organism `"human"` instead of `None` [PR](https://github.com/laminlabs/bionty/pull/242) [@falexwolf](https://github.com/falexwolf)
- ‚¨ÜÔ∏è Support Python 3.13 & remove support for Python 3.9 [PR](https://github.com/laminlabs/bionty/pull/237) [@Zethson](https://github.com/Zethson)
- ‚ôªÔ∏è Improve Ensembl prefix detection [PR](https://github.com/laminlabs/bionty/pull/239) [@sunnyosun](https://github.com/sunnyosun)
- ‚ôªÔ∏è Use `UPath.synchronize` in `s3_bionty_assets` [PR](https://github.com/laminlabs/bionty/pull/231) [@Koncopd](https://github.com/Koncopd)

## 2025-03-27 {small}`bionty 1.2.1 | db 1.3.2`

- üêõ Fix bionty ontology sources sync through `reticulate` [PR](https://github.com/laminlabs/bionty/pull/228) [@falexwolf](https://github.com/falexwolf)
- üêõ Fix data transfer through when target instances has no schema modules [PR](https://github.com/laminlabs/lamindb/pull/2602) [@falexwolf](https://github.com/falexwolf)

## 2025-03-26 {small}`bionty 1.2.0 | db 1.3.1`

In Bionty, you can now add custom ontology sources through the `Source` registry.

```python
df = pd.read_csv("./our_inhouse_genes.csv")  # a csv describing gene metadata e.g. from parsing a GTF file
custom_source = bt.Source(entity="bionty.Gene", organism="human", name="Our genes", version="2025-04-01").save()
bt.Gene.add_source(custom_source, df=df)  # couple the custom source to the Gene registry
```

<div style="height: 0.5em;"></div>

:::{dropdown} Detailed changes

Bionty now relies on a single file [source.yaml](https://github.com/laminlabs/bionty/blob/f615617f70c867cc4d9c838203f90035b890dd16/bionty/base/sources.yaml) to reference public sources.

- ‚ú® Enable update existing records to a new ontology [PR](https://github.com/laminlabs/lamindb/pull/2593)[PR](https://github.com/laminlabs/bionty/pull/223) [@sunnyosun](https://github.com/sunnyosun)
- ‚ú® Robust support of custom sources [PR](https://github.com/laminlabs/bionty/pull/222) [@sunnyosun](https://github.com/sunnyosun)
- ‚ûñ Remove pronto from main dependencies [PR](https://github.com/laminlabs/bionty/pull/220) [@Zethson](https://github.com/Zethson)
- ‚ôªÔ∏è Refactor `sync_public_sources` [PR](https://github.com/laminlabs/bionty/pull/221) [@sunnyosun](https://github.com/sunnyosun)
- ‚ôªÔ∏è Refactor default source configuration [PR](https://github.com/laminlabs/bionty/pull/215) [@sunnyosun](https://github.com/sunnyosun)
- ‚ôªÔ∏è Make EFO parsing the same as other ontologies [PR](https://github.com/laminlabs/bionty/pull/214) [@sunnyosun](https://github.com/sunnyosun)
- ‚ôªÔ∏è No longer use local source yaml files [PR](https://github.com/laminlabs/bionty/pull/217) [@sunnyosun](https://github.com/sunnyosun)
- ‚ôªÔ∏è Move source tests from lamindb to bionty [PR](https://github.com/laminlabs/bionty/pull/212) [@sunnyosun](https://github.com/sunnyosun)
- ‚ôªÔ∏è Standardize organism scientific names from ensembl source [PR](https://github.com/laminlabs/bionty/pull/208) [@sunnyosun](https://github.com/sunnyosun)
- ‚ôªÔ∏è Increase uid length for `Source` to 8 chars [PR](https://github.com/laminlabs/bionty/pull/193) [@falexwolf](https://github.com/falexwolf)
- üç± New `ExperimentalFactor` version: `efo-3.69.0` [PR](https://github.com/laminlabs/bionty/pull/203) [@Zethson](https://github.com/Zethson)
- üç± New `CellType` version: `cl`-`2024-08-16` [PR](https://github.com/laminlabs/bionty/pull/183) [@Zethson](https://github.com/Zethson)
- üç± New `Disease` version: `mondo`-`2024-08-06` [PR](https://github.com/laminlabs/bionty/pull/182) [@Zethson](https://github.com/Zethson)

:::

LaminDB changes.

- üêõ Fix incompatibility with `gotrue==2.12.0` [PR](https://github.com/laminlabs/lamindb-setup/pull/1008) [@Koncopd](https://github.com/Koncopd)
- üêõ Enable transferring features pointing to multiple labels [PR](https://github.com/laminlabs/lamindb/pull/2595) [@sunnyosun](https://github.com/sunnyosun)
- üêõ More extensive validation for updates to `artifact.key` and `artifact.suffix` [PR](https://github.com/laminlabs/lamindb/pull/2589) [@falexwolf](https://github.com/falexwolf)
- üö∏ Refactor conventions for files written during init: the SQLite file is now `.lamindb/lamin.db` and the storage marker is `.lamindb/storage_uid.txt` [PR](https://github.com/laminlabs/lamindb/pull/2587) [@falexwolf](https://github.com/falexwolf)
- üö∏ Make upload of large directories more robust by reducing batch size [PR](https://github.com/laminlabs/lamindb-setup/pull/1005) [@Koncopd](https://github.com/Koncopd)
- üö∏ Avoid requiring `coerce_dtype` for `"int"` and `"float"` in case an integer or float `pd.Series.dtype` only deviates by numerical precision/range [PR](https://github.com/laminlabs/lamindb/pull/2592) [@falexwolf](https://github.com/falexwolf)
- üö∏ In `AnnDataCurator`, make `'obs'` schema optional and allow `'uns'` schema [PR](https://github.com/laminlabs/lamindb/pull/2569) [@falexwolf](https://github.com/falexwolf)

## 2025-03-16 {small}`db 1.3.0`

New features.

- ‚ú® Add schema-based `SpatialDataCurator` [PR1](https://github.com/laminlabs/lamindb/pull/2539) [PR2](https://github.com/laminlabs/lamindb/pull/2545) [PR3](https://github.com/laminlabs/lamindb/pull/2552) [@Zethson](https://github.com/Zethson)
- ‚ú® Add schema-based `MuDataCurator` [PR](https://github.com/laminlabs/lamindb/pull/2543) [@sunnyosun](https://github.com/sunnyosun)
- ‚ú® Add `lamin get` for artifacts and `lamin load` for collections [PR](https://github.com/laminlabs/lamindb/pull/2563) [@Zethson](https://github.com/Zethson) [@falexwolf](https://github.com/falexwolf)

Other changes.

- ‚¨ÜÔ∏è Python 3.13 support [PR](https://github.com/laminlabs/lamindb/pull/2384) [@Zethson](https://github.com/Zethson)
- ‚¨ÜÔ∏è Support CELLxGENE schema 5.2.0 [PR1](https://github.com/laminlabs/lamindb/pull/2555) [PR2](https://github.com/laminlabs/lamindb/pull/2556) [@sunnyosun](https://github.com/sunnyosun)
- üö∏ Skip `ln.track()` when connected in read-only mode [PR](https://github.com/laminlabs/lamindb/pull/2561) [@falexwolf](https://github.com/falexwolf)
- üö∏ Error if trying to register an instance without a storage in the hub [PR](https://github.com/laminlabs/lamindb-setup/pull/989) [@Koncopd](https://github.com/Koncopd)
- üö∏ Refactor `organism` constraints during validation [PR](https://github.com/laminlabs/lamindb/pull/2554) [@sunnyosun](https://github.com/sunnyosun)
- üö∏ Add more constructor signatures and specific inherited types [PR](https://github.com/laminlabs/lamindb/pull/2566) [@falexwolf](https://github.com/falexwolf)
- üö∏ No logging message if database is behind by minor version [PR](https://github.com/laminlabs/lamindb-setup/pull/991) [@falexwolf](https://github.com/falexwolf)
- üìù Re-structure curation guides [PR1](https://github.com/laminlabs/lamindb/pull/2567) [PR2](https://github.com/laminlabs/lamindb/pull/2568) [@falexwolf](https://github.com/falexwolf)
- üìù Integrate tutorials into introduction guide [PR](https://github.com/laminlabs/lamin-docs/pull/223) [@falexwolf](https://github.com/falexwolf)

## 2025-03-10 {small}`R 1.0.0`

‚ú® `laminr` now has feature parity with `lamindb`. [PR](https://github.com/laminlabs/laminr/pull/146) [@lazappi](https://github.com/lazappi)

- Run `install_lamindb()`, which will ensure `lamindb >= 1.2` in the Python environment used by `reticulate`.
- Replace `db <- connect()` with `ln <- import_module("lamindb")` and see the "Detailed changes" dropdown.

The `ln` object is largely similar to the `db` object in `laminr` < v1 and matches `lamindb`'s Python API (`.` ‚Üí `$`).

:::{dropdown} Detailed changes

| What                                    | Before                                                                        | After                                            |
| --------------------------------------- | ----------------------------------------------------------------------------- | ------------------------------------------------ |
| Connect to the default LaminDB instance | `db <- connect()`                                                             | `ln <- import_module("lamindb")`                 |
| Start tracking                          | `db$track()`                                                                  | `ln$track()`                                     |
| Get an artifact from another instance   | `new_instance <- connect("another/instance"); new_instance$Artifact$get(...)` | `ln$Artifact$using("another/instance")$get(...)` |
| Create an artifact from a path          | `db$Artifact$from_path(path)`                                                 | `ln$Artifact(path)`                              |
| Finish tracking                         | `db$finish()`                                                                 | `ln$finish()`                                    |

See the updated ["Get started"](https://laminr.lamin.ai/articles/laminr.html) vignette for more information.

User-facing changes:

- Add an `import_module()` function to import Python modules with additional functionality, e.g., `import_module("lamindb")` for **lamindb**
- Add functions for accessing more `lamin` CLI commands
- Add a new "Introduction" vignette that replicates the code from the Python **lamindb** introduction guide

Internal changes:

- Add an internal `wrap_python()` function to wrap Python objects while replacing Python methods with R methods as needed, leaving most work to **{reticulate}**
- Update the internal `check_requires()` function to handle Python packages
- Add custom `cache()`/`load()` methods to the `Artifact` class
- Add custom `track()`/`finish()` methods to the **lamindb** module

:::

## 2025-03-09 {small}`db 1.2.0`

‚ú® Enable to auto-link entities to projects. [Guide](/track.ipynb#track-projects) [PR](https://github.com/laminlabs/lamindb/pull/2529) [@falexwolf](https://github.com/falexwolf)

```python
ln.track(project="My project")
```

üö∏ Better support for `spatialdata` with `Artifact.from_spatialdata()` and `artifact.load()`. [PR1](https://github.com/laminlabs/lamindb/pull/2461) [PR2](https://github.com/laminlabs/lamindb/pull/2532) [@Zethson](https://github.com/Zethson)

üö∏ Introduce `.slots` in `Schema`, `Curator`, and `artifact.features` to access schemas and curators by dataset slot. [PR](https://github.com/laminlabs/lamindb/pull/2530) [@sunnyosun](https://github.com/sunnyosun)

```python
schema.slots["obs"]  # -> schema for .obs slot of AnnData
curator.slots["obs"]  # -> curator for .obs slot of AnnData
artifact.features["obs"]  # -> feature set for .obs slot of AnnData
```

üèóÔ∏è Re-structured the internal API away from monkey-patching Django models. [PR](https://github.com/laminlabs/lamindb/pull/2516) [@falexwolf](https://github.com/falexwolf)

```{dropdown} ‚ö†Ô∏è Use of internal API

If you used the internal API, you might experience a breaking change. The most drastic change is that all internal registry-related functionality is now re-exported under `lamindb.models`.
```

üö∏ When re-creating an `Artifact`, link subsequent runs instead of updating `.run` and linking previous runs. [PR](https://github.com/laminlabs/lamindb/pull/2515) [@falexwolf](https://github.com/falexwolf)

```{dropdown} On the hub.

More details [here](https://github.com/laminlabs/laminhub-public/pull/40). [@chaichontat](https://github.com/chaichontat)

Before | After
--- | ---
An artifact is only shown as an output for the _latest run_ that created the artifact. _Previous_ runs don't show it. | All runs that (re-)create an artifact show it as an output.
<img width="1004" alt="image" src="https://github.com/user-attachments/assets/447754ff-81db-4c29-9e41-bb1c7ac82dc9" /> | <img width="978" alt="image" src="https://github.com/user-attachments/assets/8c2a8e64-0e0b-401d-95de-0c45ddb1aefd" />

```

More changes:

- ‚ú® Support R2 [PR](https://github.com/laminlabs/lamindb-setup/pull/979) [@Koncopd](https://github.com/Koncopd)
- ‚ú® Allow to use `Artifact.open()` and `Artifact.load()` for `.gz` files [PR](https://github.com/laminlabs/lamindb/pull/2506) [@Koncopd](https://github.com/Koncopd)
- üêõ Fix passing a path to `ln.track()` when no path found by `nbproject` [PR](https://github.com/laminlabs/lamindb/pull/2537) [@Koncopd](https://github.com/Koncopd)
- üêõ Do not overwrite `._state_db` of records when the current instance is passed to `.using` [PR](https://github.com/laminlabs/lamindb/pull/2534) [@Koncopd](https://github.com/Koncopd)
- üö∏ Do not show track warning for read-only connections [PR](https://github.com/laminlabs/lamindb/pull/2527) [@Koncopd](https://github.com/Koncopd)
- üö∏ Raise `NotImplementedError` in `Artifact.load()` if there is no loader [PR](https://github.com/laminlabs/lamindb/pull/2514) [@Koncopd](https://github.com/Koncopd)

## 2025-02-27 {small}`db 1.1.1`

- üö∏ Make the `obs` and `var` `DataFrameCurator` objects accessible via `AnnDataCurator.slots` [PR](https://github.com/laminlabs/lamindb/pull/2505) [@sunnyosun](https://github.com/sunnyosun)
- üö∏ Better error message upon re-creation of schema with same name and different hash [PR](https://github.com/laminlabs/lamindb/pull/2511) [@falexwolf](https://github.com/falexwolf)
- üö∏ Raise consistency error if a source path suffix doesn't match the artifact `key` suffix [PR](https://github.com/laminlabs/lamindb/pull/2490) [@falexwolf](https://github.com/falexwolf)
- üö∏ Automatically add missing columns upon `DataFrameCurator.standardize()` if `nullable` is `True` [PR](https://github.com/laminlabs/lamindb/pull/2485) [@falexwolf](https://github.com/falexwolf)
- üö∏ Allow to specify `fsspec` upload options in `Artifact.save` [PR](https://github.com/laminlabs/lamindb/pull/2486) [@Koncopd](https://github.com/Koncopd)
- üö∏ Populate `Artifact.n_observations` in `Artifact.from_df()` [PR](https://github.com/laminlabs/lamindb/pull/2484) [@Koncopd](https://github.com/Koncopd)
- üêõ Fix `UPath.view_tree` on first call on `gs` [PR](https://github.com/laminlabs/lamindb-setup/pull/977) [@Koncopd](https://github.com/Koncopd)
- üêõ Fix `.add_new_from` message [PR](https://github.com/laminlabs/lamindb/pull/2497) [@Zethson](https://github.com/Zethson)
- üêõ Run `pip freeze` with current python interpreter [PR](https://github.com/laminlabs/lamindb/pull/2495) [@ap--](https://github.com/ap--)
- üêõ Do not resolve http links when registering [PR](https://github.com/laminlabs/lamindb/pull/2491) [@Koncopd](https://github.com/Koncopd)
- üêõ Fix notebook re-run with same hash [PR](https://github.com/laminlabs/lamindb/pull/2489) [@falexwolf](https://github.com/falexwolf)

## 2025-02-18 {small}`db 1.1.0`

:::{dropdown} ‚ö†Ô∏è The `FeatureSet` registry got renamed to `Schema`.

All your code is backward compatible. The `Schema` registry encompasses feature sets as a special case.

:::

‚ú® Conveniently track functions including inputs, outputs, and parameters with a decorator: `ln.tracked()`. [PR1](https://github.com/laminlabs/lamindb/pull/2422) [PR2](https://github.com/laminlabs/lamindb/pull/2426) [@falexwolf](https://github.com/falexwolf)

```python
@ln.tracked()
def subset_dataframe(
    input_artifact_key: str,  # all arguments tracked as parameters of the function run
    output_artifact_key: str,
    subset_rows: int = 2,
    subset_cols: int = 2,
) -> None:
    artifact = ln.Artifact.get(key=input_artifact_key)
    df = artifact.load()  # auto-tracked as input
    new_df = df.iloc[:subset_rows, :subset_cols]
    ln.Artifact.from_df(new_df, key=output_artifact_key).save()  # auto-tracked as output
```

‚ú® Make sub-types of `ULabel`, `Feature`, `Schema`, `Project`, `Param`, and `Reference`. [PR](https://github.com/laminlabs/lamindb/pull/2343) [@falexwolf](https://github.com/falexwolf)

```{dropdown} On the hub.

More details [here](https://github.com/laminlabs/laminhub-public/pull/37). [@awgaan](https://github.com/awgaan) [@chaichontat](https://github.com/chaichontat)

Before | After
--- | ---
<img width="1168" alt="image" src="https://github.com/user-attachments/assets/358c5ca1-4d6b-4d81-9a89-92949f650008" /> |  <img width="1169" alt="image" src="https://github.com/user-attachments/assets/82fb8874-a8e9-4791-a034-03d085295262" />

```

```python
perturbation = ln.ULabel(name="Perturbation", is_type=True).save()
ln.ULabel(name="DMSO", type=perturbation).save()
ln.ULabel(name="IFNG", type=perturbation).save()
```

‚ú® Use an overhauled dataset curation flow. [@falexwolf](https://github.com/falexwolf) [@Zethson](https://github.com/Zethson) [@sunnyosun](https://github.com/sunnyosun)

- support persisting validation constraints as a `pandera`-compatible schema
- support validating any feature type, no longer just categoricals
- make the relationship between features, dataset schema, and curator evident

:::{dropdown} Detailed changes for the overhauled curation flow.

‚ö†Ô∏è The API gained the `lamindb.curators` module as the new way to access `Curator` classes for different data structures.

- This release introduces the schema-based `DataFrameCurator` and `AnnDataCurator`
- The old-style curation flow for categoricals based on `lamindb.Curator.from_objecttype()` continues to work

| Before                                                                                                                | After                                                                                                                 |
| --------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------- |
| <img width="802" alt="image" src="https://github.com/user-attachments/assets/b4d045f7-503d-4864-aa94-4df7ae847c3f" /> | <img width="800" alt="image" src="https://github.com/user-attachments/assets/b68ce7f8-288d-4413-8c2b-2ea56b7c14a3" /> |
| <img width="809" alt="image" src="https://github.com/user-attachments/assets/0015e94d-b60f-4230-a5a2-628dcf671d36" /> | <img width="805" alt="image" src="https://github.com/user-attachments/assets/d06b997b-4b75-4b0c-998d-b0a15be8784d" /> |

Key PRs.

- ‚ú® Overhaul curation guides + enable default values and filters on valid categories for features [PR](https://github.com/laminlabs/lamindb/pull/2469) [@falexwolf](https://github.com/falexwolf)
- ‚ú® Schema-based curators: `AnnDataCurator` [PR](https://github.com/laminlabs/lamindb/pull/2418) [@falexwolf](https://github.com/falexwolf)
- ‚ú® Schema-based curators: `DataFrameCurator` [PR](https://github.com/laminlabs/lamindb/pull/2388) [@falexwolf](https://github.com/falexwolf)

Enabling PRs.

- ‚ú® Allow passing `artifact` to `Curator` [PR](https://github.com/laminlabs/lamindb/pull/2441) [@sunnyosun](https://github.com/sunnyosun)
- üé® A `ManyToMany` between `Schema.components` and `.composites` [PR](https://github.com/laminlabs/lamindb/pull/2473) [@falexwolf](https://github.com/falexwolf)
- ‚ôªÔ∏è Mark `Schema` fields as non-editable [PR](https://github.com/laminlabs/lamindb/pull/2468) [@falexwolf](https://github.com/falexwolf)
- ‚ú® Add auxiliary field `nullable` to `Feature` [PR](https://github.com/laminlabs/lamindb/pull/2471) [@falexwolf](https://github.com/falexwolf)
- ‚ôªÔ∏è Prettify `AnnDataCurator` implementation [PR](https://github.com/laminlabs/lamindb/pull/2466) [@falexwolf](https://github.com/falexwolf)
- üö∏ Better error for malformed categorical dtype [PR](https://github.com/laminlabs/lamindb/pull/2465) [@falexwolf](https://github.com/falexwolf)
- üé® A `ManyToMany` between `Schema.components` and `.composites` [PR](https://github.com/laminlabs/lamindb/pull/2473) [@falexwolf](https://github.com/falexwolf)
- üöö Restore `.feature_sets` as a `ManyToManyField` [PR](https://github.com/laminlabs/lamindb/pull/2453) [@falexwolf](https://github.com/falexwolf)
- üöö Rename `CatCurator` to `CatManager` [PR](https://github.com/laminlabs/lamindb/pull/2467) [@falexwolf](https://github.com/falexwolf)
- üé® Let `Curator.validate()` throw an error [PR](https://github.com/laminlabs/lamindb/pull/2417) [@falexwolf](https://github.com/falexwolf)
- ‚ôªÔ∏è Re-purpose `BaseCurator` as `Curator`, introduce `CatCurator` and consolidate shared logic under `CatCurator` [PR](https://github.com/laminlabs/lamindb/pull/2416) [@falexwolf](https://github.com/falexwolf)
- ‚ôªÔ∏è Refactor `organism` handling in curators [PR](https://github.com/laminlabs/lamindb/pull/2415) [@falexwolf](https://github.com/falexwolf)
- üî• Eliminate all logic related to `using_key` in curators [PR](https://github.com/laminlabs/lamindb/pull/2414) [@falexwolf](https://github.com/falexwolf)
- üöö Bulk-rename old-style curators to `CatCurator` [PR](https://github.com/laminlabs/lamindb/pull/2413) [@falexwolf](https://github.com/falexwolf)
- üé® Self-contained definition of `CellxGene` schema / validation constraints [PR](https://github.com/laminlabs/lamindb/pull/2412) [@falexwolf](https://github.com/falexwolf)
- üöö Move `PertCurator` from `wetlab` here and add `CellxGene` `Curator` test [PR](https://github.com/laminlabs/lamindb/pull/2408) [@falexwolf](https://github.com/falexwolf)
- üöö Move CellXGene `Curator` from `cellxgene-lamin` here [PR](https://github.com/laminlabs/lamindb/pull/2403) [@falexwolf](https://github.com/falexwolf)

:::

```python
schema = ln.Schema(
    name="small_dataset1_obs_level_metadata",
    features=[
        ln.Feature(name="CD8A", dtype=int).save(),  # integer counts for CD8A marker
        ln.Feature(name="perturbation", dtype=ln.ULabel).save(),  # a categorical feature that validates against the ULabel registry
        ln.Feature(name="sample_note", dtype=str).save(),   # a note for the sample
    ],
).save()

df = pd.DataFrame({
    "CD8A": [1, 4, 0],
    "perturbation": ["DMSO", ],
    "sample_note": ["value_1", "value_2", "value_3"],
    "temperature": [22.2, 25.7, 27.3],
})
curator = ln.curators.DataFrameCurator(df, schema)
artifact = curator.save_artifact(key="example_datasets/dataset1.parquet")  # validates compliance with schema, annotates with metadata
assert artifact.schema == schema  # the validating schema
```

‚ú® Easily filter on a validating schema. [@falexwolf](https://github.com/falexwolf) [@Zethson](https://github.com/Zethson) [@sunnyosun](https://github.com/sunnyosun)

:::{dropdown} On the hub.

With the `Schema` filter button, find all datasets that satisfy a given schema ([‚Üí explore](https://lamin.ai/laminlabs/lamindata/artifacts?filter[and][0][or][0][_branch_code][eq]=1&filter[and][1][or][0][is_latest][eq]=true&filter[and][2][or][0][schema.name][eq]=small_dataset1_obs_level_metadata)).

<img width="1718" alt="image" src="https://github.com/user-attachments/assets/7b10091e-a22d-43c8-b13f-6e25bae1c445" />

:::

```python
schema = ln.Schema.get(name="small_dataset1_obs_level_metadata")  # get a schema
ln.Artifact.filter(schema=schema).df()  # filter all datasets that were validated by the schema
```

‚ú® `Collection.open()` returns a `pyarrow` dataset. [PR](https://github.com/laminlabs/lamindb/pull/2462) [@Koncopd](https://github.com/Koncopd)

```python
df = pd.DataFrame({"feat1": [0, 0, 1, 1], "feat2": [6, 7, 8, 9]})
df[:2].to_parquet("df1.parquet", engine="pyarrow")
df[2:].to_parquet("df2.parquet", engine="pyarrow")

artifact1 = ln.Artifact(shard1, key="df1.parquet").save()
artifact2 = ln.Artifact(shard2, key="df2.parquet").save()
collection = ln.Collection([artifact1, artifact2], key="parquet_col")

dataset = collection.open() # backed by files in the cloud storage
dataset.to_table().to_pandas().head()
```

‚ú® Support s3-compatible endpoint urls, say your on-prem MinIO deployment. [PR](https://github.com/laminlabs/lamindb/pull/2420) [@Koncopd](https://github.com/Koncopd)

Speed up instance creation through squashed migrations.

- ‚ö° Squash migrations [PR1](https://github.com/laminlabs/lamindb/pull/2367) [PR2](https://github.com/laminlabs/lamindb/pull/2457) [@falexwolf](https://github.com/falexwolf)

Tiledbsoma.

- ‚ú® Support `endpoint_url` in operations with tiledbsoma [PR1](https://github.com/laminlabs/lamindb/pull/2476) [PR2](https://github.com/laminlabs/lamindb/pull/2478) [@Koncopd](https://github.com/Koncopd)
- ‚ú® Add `Artifact.from_tiledbsoma` to populate `n_observations` [PR](https://github.com/laminlabs/lamindb/pull/2438) [@Koncopd](https://github.com/Koncopd)

MappedCollection.

- üêõ Allow filtering on `np.nan` in `obs_filter` of `MappedCollection` [PR](https://github.com/laminlabs/lamindb/pull/2443) [@Koncopd](https://github.com/Koncopd)
- üêõ Fix labels for `NaN` in categorical columns for `MappedCollection` [PR](https://github.com/laminlabs/lamindb/pull/2411) [@Koncopd](https://github.com/Koncopd)

SpatialDataCurator.

- üêõ Fix `var_index` standardization of `SpatialDataCurator` [PR1](https://github.com/laminlabs/lamindb/pull/2433) [PR2](https://github.com/laminlabs/lamindb/pull/2444) [@Zethson](https://github.com/Zethson)
- üêõ Fix sample level metadata optional in `SpatialDataCatManager` [PR](https://github.com/laminlabs/lamindb/pull/2391) [@Zethson](https://github.com/Zethson)

Core functionality.

- ‚ú® Allow to check the need for syncing without actually syncing [PR](https://github.com/laminlabs/lamindb-setup/pull/969) [@Koncopd](https://github.com/Koncopd)
- ‚ú® Check for corrupted cache in `Artifact.load()` & `Artifact.open()` [PR](https://github.com/laminlabs/lamindb/pull/2386) [PR](https://github.com/laminlabs/lamindb/pull/2395) [@Koncopd](https://github.com/Koncopd)
- ‚ú® Infer `n_observations` in `Artifact.from_anndata` [PR](https://github.com/laminlabs/lamindb/pull/2404) [@Koncopd](https://github.com/Koncopd)
- üêõ Account for VSCode appending languageid to markdown cell in notebook tracking [PR](https://github.com/laminlabs/lamin-cli/pull/110) [@falexwolf](https://github.com/falexwolf)
- üêõ Fix dangling folders on upload failures [PR](https://github.com/laminlabs/lamindb/pull/2448) [@Koncopd](https://github.com/Koncopd)
- üêõ Normalize module names for robust checking in `_check_instance_setup()` [PR](https://github.com/laminlabs/lamindb-setup/pull/967) [@Koncopd](https://github.com/Koncopd)
- üêõ Fix idempotency of `Feature` creation when `description` is passed and improve filter and get error behavior [PR](https://github.com/laminlabs/lamindb/pull/2442) [@Zethson](https://github.com/Zethson)
- üêõ Fix caching logic in `Artifact.open()` [PR](https://github.com/laminlabs/lamindb/pull/2454) [@Koncopd](https://github.com/Koncopd)
- üö∏ Make new version upon passing existing `key` to `Collection` [PR](https://github.com/laminlabs/lamindb/pull/2474) [@falexwolf](https://github.com/falexwolf)
- üö∏ Throw better error upon checking `instance.modules` when loading a lamindb schema module [PR](https://github.com/laminlabs/lamindb-setup/pull/946) [@Koncopd](https://github.com/Koncopd)
- üö∏ Validate existing records in the DB irrespective of whether an ontology `source` is passed or not [PR](https://github.com/laminlabs/lamindb/pull/2370) [@sunnyosun](https://github.com/sunnyosun)
- üö∏ Full guarantee of avoiding duplicating `Transform`, `Artifact` & `Collection` in concurrent runs [PR](https://github.com/laminlabs/lamindb/pull/2432) [@falexwolf](https://github.com/falexwolf)
- üö∏ Fix `RemovedInDjango60Warning` [PR](https://github.com/laminlabs/lamindb/pull/2446) [@Zethson](https://github.com/Zethson)
- üö∏ Better user feedback during keyword validation in `Record` constructor [PR](https://github.com/laminlabs/lamindb/pull/2402) [@Zethson](https://github.com/Zethson)
- üö∏ Fix warning about artifacts in trash [PR](https://github.com/laminlabs/lamindb/pull/2406) [@ap--](https://github.com/ap--)
- üö∏ Improved error message when saving via CLI [PR](https://github.com/laminlabs/lamindb/pull/2379) [@Zethson](https://github.com/Zethson)
- üö∏ Improve local storage not found warning message [PR](https://github.com/laminlabs/lamindb-setup/pull/955) [@Zethson](https://github.com/Zethson)
- üö∏ Better error message when attempting to save a file while not being connected to an instance [PR](https://github.com/laminlabs/lamin-cli/pull/105) [@Zethson](https://github.com/Zethson)
- üö∏ Error for non-keyword parameters for `Artifact.from_x` methods [PR](https://github.com/laminlabs/lamindb/pull/2401) [@Zethson](https://github.com/Zethson)

Housekeeping.

- üö∏ Error at runtime with old s3fs [PR](https://github.com/laminlabs/lamindb-setup/pull/962) [@Koncopd](https://github.com/Koncopd)
- üö∏ Safer resolve in `check_path_is_child_of_root()` [PR](https://github.com/laminlabs/lamindb/pull/2409) [@Koncopd](https://github.com/Koncopd)
- ‚¨ÜÔ∏è Upgrade fsspec packages (s3fs, gcsfs, universal_pathlib) [PR](https://github.com/laminlabs/lamindb-setup/pull/963) [@Koncopd](https://github.com/Koncopd)
- ‚ûï Add pyyaml to dependencies [PR](https://github.com/laminlabs/lamindb/pull/2477) [@Koncopd](https://github.com/Koncopd)

## 2025-01-23 {small}`db 1.0.5`

- üö∏ No longer throw a `NotebookNotSaved` error in `ln.finish()` but wait for the user or gracefully exit [PR](https://github.com/laminlabs/lamindb/pull/2375) [@falexwolf](https://github.com/falexwolf)
- üö∏ Resolve save `FutureWarning` [PR](https://github.com/laminlabs/lamin-cli/pull/108) [@Zethson](https://github.com/Zethson)
- üêõ Fix `Artifact.replace()` for folder-like artifacts [PR](https://github.com/laminlabs/lamindb/pull/2374) [@Koncopd](https://github.com/Koncopd)
- üêõ Filter the latest transform on saving by filename [PR](https://github.com/laminlabs/lamin-cli/pull/109) [@Koncopd](https://github.com/Koncopd)

## 2025-01-21 {small}`db 1.0.4`

üöö Revert `Collection.description` back to unlimited length `TextField`. [PR](https://github.com/laminlabs/lamindb/pull/2369) [@falexwolf](https://github.com/falexwolf)

## 2025-01-21 {small}`db 1.0.3`

üö∏ In `track()`, improve logging in RStudio sessions. [PR](https://github.com/laminlabs/lamindb/pull/2365) [@falexwolf](https://github.com/falexwolf)

## 2025-01-20 {small}`R 0.4.0`

- üöö Migrate to lamindb v1 [PR](https://github.com/laminlabs/laminr/pull/136) [@falexwolf](https://github.com/falexwolf)
- üö∏ Improve the user experience for setting up Python & reticulate [PR](https://github.com/laminlabs/laminr/pull/129) [@lazappi](https://github.com/lazappi)

## 2025-01-20 {small}`db 1.0.2`

üöö Improvments for lamindb v1 migrations. [PR](https://github.com/laminlabs/lamindb/pull/2363) [@falexwolf](https://github.com/falexwolf)

- add a `.description` field to `Schema`
- enable labeling `Run` with `ULabel`
- add a `.predecessors` and `.successors` field to `Project` akin to what's present on `Transform`
- make `.uid` fields not editable

## 2025-01-18 {small}`db 1.0.1`

üêõ Block non-admin users from confirming the dialogue for integrating `lnschema-core`. [PR](https://github.com/laminlabs/lamindb/pull/2362) [@falexwolf](https://github.com/falexwolf)

## 2025-01-17 {small}`db 1.0.0`

This release makes the API consistent, integrates `lnschema_core` & `ourprojects` into the `lamindb` package, and introduces a breadth of database migrations to enable future features without disruption. You'll now need at least **Python 3.10**.

:::{dropdown} Your code will continue to run as is, but you will receive warnings about a few renamed API components.

| What                         | Before                                                   | After                                                           |
| ---------------------------- | -------------------------------------------------------- | --------------------------------------------------------------- |
| Dataset vs. model            | `Artifact.type`                                          | `Artifact.kind`                                                 |
| Python object for `Artifact` | `Artifact._accessor`                                     | `Artifact.otype`                                                |
| Number of files              | `Artifact.n_objects`                                     | `Artifact.n_files`                                              |
| `name` arg of `Transform`    | `Transform(name="My notebook", key="my-notebook.ipynb")` | `Transform(key="my-notebook.ipynb", description="My notebook")` |
| `name` arg of `Collection`   | `Collection(name="My collection")`                       | `Collection(key="My collection")`                               |
| Consecutiveness field        | `Run.is_consecutive`                                     | `Run._is_consecutive`                                           |
| Run initiator                | `Run.parent`                                             | `Run.initiated_by_run`                                          |
| `--schema` arg               | `lamin init --schema bionty,wetlab`                      | `lamin init --modules bionty,wetlab`                            |

:::

Migration guide:

1. Upon `lamin connect account/instance` you will be prompted to confirm migrating away from `lnschema_core`
2. After that, you will be prompted to call `lamin migrate deploy` to apply database migrations

New features:

- ‚ú® Allow http storage backend for `Artifact` [PR](https://github.com/laminlabs/lamindb/pull/2291) [@Koncopd](https://github.com/Koncopd)
- ‚ú® Add `SpatialDataCurator` [PR](https://github.com/laminlabs/lamindb/pull/2290) [@Zethson](https://github.com/Zethson)
- ‚ú® Allow filtering by multiple `obs` columns in `MappedCollection` [PR](https://github.com/laminlabs/lamindb/pull/2352) [@Koncopd](https://github.com/Koncopd)
- ‚ú® In git sync, also search git blob hash in non-default branches [PR](https://github.com/laminlabs/lamindb/pull/2332) [@Zethson](https://github.com/Zethson)
- ‚ú® Add relationship with `Project` to everything except `Run`, `Storage` & `User` so that you can easily filter for the entities relevant to your project [PR](https://github.com/laminlabs/lamindb/pull/2353) [@falexwolf](https://github.com/falexwolf)
- ‚ú® Capture logs of scripts during `ln.track()` [PR1](https://github.com/laminlabs/lamindb/pull/2325) [PR2](https://github.com/laminlabs/lamindb/pull/2333) [@falexwolf](https://github.com/falexwolf) [@Koncopd](https://github.com/Koncopd)
- ‚ú® Support `"|"`-seperated multi-values in `Curator` [PR](https://github.com/laminlabs/lamindb/pull/2341) [@sunnyosun](https://github.com/sunnyosun)
- üö∏ Accept `None` in `connect()` and improve migration dialogue [PR](https://github.com/laminlabs/lamindb-setup/pull/947) [@falexwolf](https://github.com/falexwolf)

UX improvements:

- üö∏ Simplify the `ln.track()` experience [PR](https://github.com/laminlabs/lamindb/pull/2308) [@falexwolf](https://github.com/falexwolf)
  1. you can omit the `uid` argument
  2. you can organize transforms in folders
  3. versioning is fully automated (requirement for 1.)
  4. you can save scripts and notebooks without running them (corollary of 1.)
  5. you avoid the interactive prompt in a notebook and the throwing of an error in a script (corollary of 1.)
  6. you are no longer required to add a title in a notebook
- üö∏ Raise error when modifying `Artifact.key` in problematic ways [PR1](https://github.com/laminlabs/lamindb/pull/2326) [PR2](https://github.com/laminlabs/lamindb/pull/2345) [@sunnyosun](https://github.com/sunnyosun) [@Koncopd](https://github.com/Koncopd)
- üö∏ Better error message on running `ln.track()` within Python terminal [PR](https://github.com/laminlabs/lamindb/pull/2334) [@Koncopd](https://github.com/Koncopd)
- üö∏ Hide traceback for `InstanceNotEmpty` using Click Exception [PR](https://github.com/laminlabs/lamindb-setup/pull/930) [@Zethson](https://github.com/Zethson)
- üö∏ Hide underscore attributes in `__repr__` [PR](https://github.com/laminlabs/lamindb/pull/2329) [@Zethson](https://github.com/Zethson)
- üö∏ Only auto-search `._name_field` in sub-classes of `CanCurate` [PR](https://github.com/laminlabs/lamindb/pull/2319) [@falexwolf](https://github.com/falexwolf)
- üö∏ Simplify installation & API overview [PR](https://github.com/laminlabs/lamindb/pull/2302) [@falexwolf](https://github.com/falexwolf)
- üö∏ Make `lamin_run_uid` categorical in tiledbsoma stores [PR](https://github.com/laminlabs/lamindb/pull/2300) [@Koncopd](https://github.com/Koncopd)
- üö∏ Add defensive check for `organism` arg [PR](https://github.com/laminlabs/lamindb/pull/2297) [@Zethson](https://github.com/Zethson)
- üö∏ Raise `ValueError` when trying to search a `None` value [PR](https://github.com/laminlabs/lamindb/pull/2294) [@Zethson](https://github.com/Zethson)

Bug fixes:

- üêõ Skip deleting storage when deleting outdated versions of folder-like artifacts [PR](https://github.com/laminlabs/lamindb/pull/2349) [@Koncopd](https://github.com/Koncopd)
- üêõ Let `SOMACurator()` validate and annotate all `.obs` columns [PR](https://github.com/laminlabs/lamindb/pull/2287) [@falexwolf](https://github.com/falexwolf)
- üêõ Fix renaming of feature sets [PR](https://github.com/laminlabs/lamindb/pull/2288) [@sunnyosun](https://github.com/sunnyosun)
- üêõ Do not raise an exception when default AWS credentials fail [PR](https://github.com/laminlabs/lamindb-setup/pull/924) [@Koncopd](https://github.com/Koncopd)
- üêõ Only map synonyms when field is name [PR](https://github.com/laminlabs/lamindb/pull/2312) [@sunnyosun](https://github.com/sunnyosun)
- üêõ Fix `source` in `.from_values` [PR](https://github.com/laminlabs/lamindb/pull/2310) [@sunnyosun](https://github.com/sunnyosun)
- üêõ Fix creating instances with storage in the current local working directory [PR](https://github.com/laminlabs/lamindb-setup/pull/917) [@Koncopd](https://github.com/Koncopd)
- üêõ Fix NA values in `Curator.add_new_from()` [PR](https://github.com/laminlabs/lamindb/pull/2305) [@sunnyosun](https://github.com/sunnyosun)

Refactors, renames & maintenance:

- üèóÔ∏è Integrate `lnschema-core` into `lamindb` [PR1](https://github.com/laminlabs/lamindb/pull/2309) [PR2](https://github.com/laminlabs/lamin-cli/pull/101) [@falexwolf](https://github.com/falexwolf) [@Koncopd](https://github.com/Koncopd)
- üèóÔ∏è Integrate `ourprojects` into lamindb [PR](https://github.com/laminlabs/lamindb/pull/2342) [@falexwolf](https://github.com/falexwolf)
- ‚ôªÔ∏è Manage `created_at`, `updated_at` on the database-level, make `created_by` not editable [PR](https://github.com/laminlabs/lamindb/pull/2353) [@falexwolf](https://github.com/falexwolf)
- üöö Rename transform type "glue" to "linker" [PR](https://github.com/laminlabs/lamindb/pull/2353) [@falexwolf](https://github.com/falexwolf)
- üöö Deprecate the `--schema` argument of `lamin init` in favor of `--modules` [PR](https://github.com/laminlabs/lamindb/pull/2340) [@falexwolf](https://github.com/falexwolf)
- ‚¨ÜÔ∏è Compatibility with tiledbsoma==1.15.0 [PR](https://github.com/laminlabs/lamindb/pull/2307) [@Koncopd](https://github.com/Koncopd)

DevOps:

- üë∑ Isolate curator tests [PR](https://github.com/laminlabs/lamindb/pull/2304) [@Zethson](https://github.com/Zethson)

:::{dropdown} Detailed list of database migrations

Those not yet announced above will be announced with the functionality they enable.

- ‚ôªÔ∏è Add `contenttypes` Django plugin [PR](https://github.com/laminlabs/lamindb-setup/pull/940) [@falexwolf](https://github.com/falexwolf)
- üöö Prepare introduction of persistable `Curator` objects by renaming `FeatureSet` to `Schema` on the database-level [PR](https://github.com/laminlabs/lamindb/pull/2348) [@falexwolf](https://github.com/falexwolf)
- üöö Add a `.type` foreign key to `ULabel`, `Feature`, `FeatureSet`, `Reference`, `Param` [PR](https://github.com/laminlabs/lamindb/pull/2343) [@falexwolf](https://github.com/falexwolf)
- üöö Introduce `RunData`, `TidyTable`, and `TidyTableData` in the database [PR](https://github.com/laminlabs/lamindb/pull/2353) [@falexwolf](https://github.com/falexwolf)

All remaining database schema changes were made in this [PR](https://github.com/laminlabs/lamindb/pull/2323) [@falexwolf](https://github.com/falexwolf). Data migrations happen automatically.

- remove `_source_code_artifact` from Transform, it's been deprecated since 0.75
  - data migration: for all transforms that have `_source_code_artifact` populated, populate `source_code`
- rename `Transform.name` to `Transform.description` because it's analogous to `Artifact.description`
  - backward compat:
    - in the `Transform` constructor use `name` to populate `key` in all cases in which only `name` is passed
    - return the same transform based on `key` in case `source_code is None` via `._name_field = "key"`
  - data migrations:
    - there already was a legacy `description` field that was never exposed on the constructor; to be safe, we concatenated potential data in it on the new description field
    - for all transforms that have `key=None` and `name!=None`, use `name` to pre-populate `key`
- rename `Collection.name` to `Collection.key` for consistency with `Artifact` & `Transform` and the high likelihood of you wanting to organize them hierarchically
- a `_branch_code` integer on every record to model pull requests
  - include `visibility` within that code
  - repurpose `visibility=0` as `_branch_code=0` as "archive"
  - put an index on it
  - code a "draft" as \_branch_code = 2, and "draft prs" as negative branch codes
- rename values `"number"` to `"num"` in dtype
- an `._aux` json field on `Record`
- a SmallInteger `run._status_code` that allows to write `finished_at` in clean up operations so that there is a run time also for aborted runs
- rename `Run.is_consecutive` to `Run._is_consecutive`
- a `_template_id` FK to store the information of the generating template (whether a record is a template is coded via \_branch_code)
- rename `_accessor` to `otype` to publicly declare the data format as `suffix, accessor`
- rename `Artifact.type` to `Artifact.kind`
- a FK to artifact `run._logfile` which holds logs
- a `hash` field on `ParamValue` and `FeatureValue` to enforce uniqueness without running the danger of failure for large dictionaries
- add a boolean field `._expect_many` to `Feature`/`Param` that defaults to `True`/`False` and indicates whether values for this feature/param are expected to occur a single or multiple times for every single artifact/run
  - for feature
    - if it's `True` (default), the values come from an observation-level aggregation and a dtype of `datetime` on the observation-level mean `set[datetime]` on the artifact-level
    - if it's `False` it's an artifact-level value and `datetime` means `datetime`; this is an edge case because an arbitrary artifact would always be a set of arbitrary measurements that would need to be aggregated ("one just happens to measure a single cell line in that artifact")
  - for param
    - if it's `False` (default), the values mean artifact/run-level values and `datetime` means `datetime`
    - if it's `True`, the values would be from an aggregation, this seems like an edge case but say when characterizing a model ensemble trained with different parameters it could be relevant
- remove the `.transform` foreign key from artifact and collection for consistency with all other records; introduce a property and a simple filter statement instead that maintains the same UX
- store provenance metadata for `TransformULabel`, `RunParamValue`, `ArtifactParamValue`
- enable linking projects & references to transforms & collections
- rename `Run.parent` to `Run.initiated_by_run`
- introduce a boolean flag on artifact that's called `_overwrite_versions`, which indicates whether versions are overwritten or stored separately; it defaults to `False` for file-like artifacts and to `True` for folder-like artifacts
- Rename `n_objects` to `n_files` for more clarity
- Add a `Space` registry to lamindb with an FK on every `BasicRecord`
- add a name column to `Run` so that a specific run can be used as a named specific analysis
- remove `_previous_runs` field on everything except `Artifact` & `Collection`

:::
